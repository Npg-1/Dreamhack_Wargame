막 그르케 어려운 문제는 아니었지만 그렇다고 해서 그렇게 쉬운 문제도 아니었네요

Another Ping도 웹해킹의 다른 ping 문제와 비슷하게 핑을 보내는데 IP 주소에 다른 입력값을 넣어서 커맨드 인젝션을 하는 문제임

cmd = f"ping -c 4 {ip}" 에서 ip에 커맨드 인젝션을 하면 됨

근데 FILTERED_CHARS이 있어서
FILTERED_CHARS = [' ', ';', '|', '&', '>', '<', '(', ')', '[', ']', '{', '}', '\n', '\r']
위의 문자들은 다 사용할 수 없음

따라서 1.1.1.1; cat flag.txt 와 같은 형태로는 인젝션 공격이 안 됨

근데 필터링 문자에 백틱(`)과 달러($)는 없어서 이것들로 커맨드 인젝션을 수행할 수 있음

백틱(`)은 명령어 대체 역할을 수행함
명령어에 백틱으로 감싼 명령어가 따로 포함되어 있으면 해당 명령어를 먼저 수행하고 그 결과값을 백틱 전체 자리에 그대로 대체함

예를 들어서 passwd_path.txt에 "/etc/passwd" 라는 문자열이 들어있을 때
cat `cat passwd_path` 를 하면 /etc/passwd의 내용을 읽을 수 있음


$IFS는 리눅스 셸에서 사용하는 내부 필드 구분자라는 *환경변수*임
간다히 말하면 셸이 문자열을 실행할 때 어디서 단어를 끊어야하는지 결정하는 기준이 되는 문자임

그냥 공백문자 자리에 $IFS를 써주면 됨.
cd /home -> cd$IFS/home
cd user -> cd$IFSuser or cd$IFS\user

$IFS 다음에 바로 일반 문자가 들어와서 인식이 안 될 때가 있는데 그럴 때는 \를 써주면 됨


위 내용을 종합하면 아래와 같은 명령어를 만들 수 있음

1.1.1.1`cat$IFS\flag.txt`

공백도 없고, ;도 없지만 백틱(`)과 달러($)를 통해서 필터를 위회해서 플래그를 얻을 수 있음
(플래그는 현 위치에 있음)
