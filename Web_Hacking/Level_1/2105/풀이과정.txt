login.php를 보면 중간에 
else if ($userData['password'] !== hash("sha256", $password)) {
    $error = "Invalid password";

이런 게 나오는데 사용자가 입력한 비밀번호를 sha256으로 해시함수를 써 변환한 값이
userData['password']와 일치하면 success가 됨

근데 guest.json은 password가 guest를 변환한 값과 일치해서 금방 찾았지만
admin.json의 비밀번호는 기존값을 못 찾음
sha256은 어떻게 해서 반대로 디코딩하는 게 거의 수학적으로 불가능하다 하네요

그래서 guest와 비슷하게 대조하는 방식으로 찾아볼까 해서 CrackStation 이라는 사이트가 있어서
여기에 해시값을 넣으면 "1234", "password", "admin" 등 이미 해시값으로 변환한 값들을 사용해서
원본값을 유추하는 사이트가 있는데 여기서도 안 나오는 걸 보니까 대조하는 방식으로는 찾기 힘들 거 같음


일단 guest로 로그인이 됐을 때 생성되는 쿠키에 보면
PHPSESSID == 6iev9v6rd6a9m4tt041utoi3id
라고 하네요

flag값을 보려면 _SESSION['user'] 값이 admin으로 되어 있는 상태로 사이트 url 뒤에 /flag.php 를 붙여서 접속하면 볼 수 있음


------------------------------------------------------------------------------------------------------------------------
- flag.php를 보고 싶음
- flag.php에서 플래그값을 보려면 _SESSION['user']가 'admin'이 되면 됨
- _SESSION['user'] 값을 수정하려면 login.php에서 admin으로 로그인을 하면 됨
- 근데 로그인을 하려면 id값과 비밀번호를 알면 되는데 사용자에게 주어진 값은 id값과 sha256으로 변환된 비밀번호 값이 주어짐
- 사용자는 원본 비밀번호 값을 알아내서 입력하면 그걸 해시값으로 변환해서 서버의 admin.json의 비밀번호와 대조해서 맞으면 로그인이 됨
- 근데 원본 비밀번호를 알아내는 건 거의 불가능하거나 ㅈㄴ 어려움
- 따라서 다른 방법이 필요한데 원석이 형이 .htaccess, 000-default.conf 를 보라고 하면서 DELETE 요청 말고 다른 요청은 다 쓸 수 있다고 힌트를 줌
- 코드를 보면 (서버 url)/user 에 있는 guest.json, admin.json의 내용과 사용자의 입력값을 대조하는데 브라우저의 PUT요청으로 admin.json을 사용자가 만든 것으로 덮어씌울 수 있음
- 사용자가 만든 json파일로 덮어씌운 다음에 로그인하고 (서버 url)/flag.php로 접속하면 끝!!







